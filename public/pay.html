<!DOCTYPE html>
<html>
<body>
    <h1>Оплатить <span id="amt"></span>₽?</h1>
    <button id="btn" onclick="pay()">ПОДТВЕРДИТЬ ОПЛАТУ</button>
    <script>
        const params = new URLSearchParams(window.location.search);
        document.getElementById('amt').innerText = params.get('amount');
        const orderId = params.get('order_id');

        async function pay() {
            document.getElementById('btn').disabled = true;
            await fetch('/api/confirm', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ orderId: orderId, amount: params.get('amount') })
            });
            alert("Готово! Касса получила сигнал.");
        }
    </script>
</body>
</html>